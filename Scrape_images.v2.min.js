javascript:let PAGE_RANGE=[];!async function(e){const n="vue-recycle-scroller wide-scroll ready direction-vertical",o="scroller wide-scroll",a="position";async function c(e){return await new Promise((t=>{setTimeout(t,e)}))}async function l(e,t=400,n=25,o=a,l="page",s="image/png"){const i=document.querySelector("["+o+'="'+e+'"]');if(!i)throw new Error("Unable to find page: "+e);console.log("Downloading page: "+e);let r=0,m="";i.click();const d=document.createElement("canvas");for(;;){if(r++,r>=t){console.error("After "+t+" attempts, stopped trying to download page: "+e);break}await c(n);const o=document.querySelector("["+l+'="'+e+'"]');if(!o){if(document.getElementsByClassName("limited-container").length>0){console.warn("Page "+e+" cannot be loaded due to paywall.");break}continue}const a=o.parentElement.querySelector("canvas");if(!a)continue;m=a.toDataURL(s),d.width=a.width,d.height=a.height;if(m!==d.toDataURL())break}return d.remove(),m}console.time("getPagesRange");const[s,i]=await async function(e=o,l=n,s="item page-nav-item",i=40,r=5,m=a){document.getElementsByClassName(e)[0].scrollTo(0,0),document.getElementsByClassName(l)[0].scrollTo(0,0),await c(10);const d=new Set,g=i*Number(document.getElementsByClassName(s)[0].offsetHeight),u=document.getElementsByClassName(l)[0],h=u.scrollHeight+g;for(let e=0;e<=h;e+=g)await new Promise((n=>{t=setTimeout((function(e,t){e.scrollTo(0,t),n()}),r,u,e)})),await new Promise((e=>{setTimeout((function(){const t=document.querySelectorAll("["+m+"]");for(let e=0;e<t.length;e++)d.add(Number(t[e].getAttribute(m)));e()}))}));const p=[Math.min(...d),Math.max(...d)];return console.log("Pages range from "+p[0]+" to "+p[1]+"."),p}();console.timeEnd("getPagesRange");const r=e[0]||s,m=e[1]||i;console.time("getPages-"+r+"-to-"+m);const d=await async function(e,t,a=o,s=n){const i=[];document.getElementsByClassName(a)[0].scrollTo(0,0),document.getElementsByClassName(s)[0].scrollTo(0,0),await c(10);for(let n=e;n<=t;n++){console.time("page-"+n);const e=await l(n);if(console.timeEnd("page-"+n),""===e){console.warn("Will not download page(s): "+n+" through "+t);break}i.push([n,e])}return i}(r,m);console.timeEnd("getPages-"+r+"-to-"+m),console.time("printPages-len-"+d.length),function(e){document.body.innerHTML="",document.body.style="",document.head.innerHTML="";const t=e[0][0],n=e[e.length-1][0],o=document.createElement("title");o.innerHTML="Pages "+t+" to "+n,document.head.append(o),document.body.attributes="";const a=document.createElement("style");a.innerHTML="html { height: 100%; } body { min-height: 100%; } img { max-height: 9.5in; max-width:7in; display: block; margin: 0 auto; object-fit: contain;}",document.head.append(a);const c=document.createElement("div");document.body.append(c);for(let t=0;t<e.length;t++){const n=document.createElement("div");document.body.append(n);const o=document.createElement("img");o.src=e[t][1],n.append(o)}}(d),console.timeEnd("printPages-len-"+d.length),console.log("Ready to print...")}(PAGE_RANGE);
